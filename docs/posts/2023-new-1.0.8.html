<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kyle Baron">
<meta name="dcterms.date" content="2023-03-04">
<meta name="description" content="Find out whatâ€™s new in mrgsolve version 1.0.8">

<title>mrgsolve/blog - New in 1.0.8</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      color: white;
background: #097f5f;
    }
    </style>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="mrgsolve/blog - New in 1.0.8">
<meta property="og:description" content="Find out what's new in mrgsolve version 1.0.8">
<meta property="og:image" content="https://mrgsolve.org/blog/images/preview.png">
<meta property="og:site-name" content="mrgsolve/blog">
<meta name="twitter:title" content="mrgsolve/blog - New in 1.0.8">
<meta name="twitter:description" content="Find out what's new in mrgsolve version 1.0.8">
<meta name="twitter:image" content="https://mrgsolve.org/blog/images/preview.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">mrgsolve/blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org/user-guide">
 <span class="menu-text">UserGuide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org/blog">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org/vignettes">
 <span class="menu-text">Vignettes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org/learn.html">
 <span class="menu-text">Learn</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org/docs">
 <span class="menu-text">Docs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/mrgsolve/depot">
 <span class="menu-text">Models</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-source" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Source</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-source">    
        <li>
    <a class="dropdown-item" href="https://github.com/metrumresearchgroup/mrgsolve">
 <span class="dropdown-text">GitHub</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://cran.r-project.org/package=mrgsolve">
 <span class="dropdown-text">CRAN</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="https://github.com/metrumresearchgroup/mrgsolve/discussions">
 <span class="dropdown-text">Discuss</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/metrumresearchgroup/mrgsolve/issues">
 <span class="dropdown-text">Report an issue</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mrgsolve.org">
 <span class="menu-text">mrgsolve.org</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/metrumresearchgroup/mrgsolve"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/mrgsolve"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">New in 1.0.8</h1>
                  <div>
        <div class="description">
          <p>Find out whatâ€™s new in mrgsolve version 1.0.8</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">new release</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kyle Baron </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 4, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#missing-values-and-input-data-sets" id="toc-missing-values-and-input-data-sets" class="nav-link" data-scroll-target="#missing-values-and-input-data-sets"><span class="toc-section-number">2</span>  Missing values and input data sets</a></li>
  <li><a href="#convenient-eta-capture" id="toc-convenient-eta-capture" class="nav-link" data-scroll-target="#convenient-eta-capture"><span class="toc-section-number">3</span>  Convenient ETA capture</a></li>
  <li><a href="#new-model-macro-sigma" id="toc-new-model-macro-sigma" class="nav-link" data-scroll-target="#new-model-macro-sigma"><span class="toc-section-number">4</span>  New model macro: <code>SIGMA()</code></a></li>
  <li><a href="#matching-mrgsolve-and-nonmem-run-numbers" id="toc-matching-mrgsolve-and-nonmem-run-numbers" class="nav-link" data-scroll-target="#matching-mrgsolve-and-nonmem-run-numbers"><span class="toc-section-number">5</span>  Matching mrgsolve and NONMEM run numbers</a></li>
  <li><a href="#scrape-etas-from-the-input-data-set" id="toc-scrape-etas-from-the-input-data-set" class="nav-link" data-scroll-target="#scrape-etas-from-the-input-data-set"><span class="toc-section-number">6</span>  Scrape ETAs from the input data set</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>mrgsolve version 1.0.8 was released to CRAN on March 4th, 2023. This blog post introduces some of the new features in 1.0.8 as well as 1.0.7, which was not released to CRAN.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(mrgsolve)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="missing-values-and-input-data-sets" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Missing values and input data sets</h1>
<p>Missing values (<code>NA</code>) are now allowed in the following columns of input data sets:</p>
<ul>
<li><code>CMT</code></li>
<li><code>AMT</code></li>
<li><code>RATE</code></li>
<li><code>EVID</code></li>
<li><code>II</code></li>
<li><code>ADDL</code></li>
<li><code>SS</code></li>
</ul>
<p>The lower case versions of these names may also include <code>NA</code>.</p>
<p>In previous versions of mrgsolve, it was an error to include <code>NA</code> in these data set columns. Starting with version 1.0.7, mrgsolve will convert <code>NA</code> to <code>0</code> for these columns only. mrgsolve will continue to warn the user when missing values are in parameter columns.</p>
</section>
<section id="convenient-eta-capture" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Convenient ETA capture</h1>
<p>The <code>$CAPTURE</code> block gains a new option for capturing any or all <code>ETA</code>s into the simulated output. The user writes an expression which evaluates to the integer numbers of <code>ETA</code>s to capture into the <code>@etas</code> option. For examples</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1"></a>$OMEGA <span class="fl">0.1</span> <span class="fl">0.2</span> <span class="fl">0.3</span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>$CAPTURE @etas <span class="dv">1</span><span class="op">:</span>last</span>
<span id="cb2-4"><a href="#cb2-4"></a>CL Y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>will capture ETAs 1, 2, and 3 into <code>ETA1</code>, <code>ETA2</code>, and <code>ETA3</code> in the simulated output. <strong>Note</strong> that the syntax <em>resembles</em> what you might right in NONMEM where <code>last</code> is the total number of <code>ETA</code>s in the problem.</p>
<p>Also note that <code>ETA</code> naming resembles what you would get from NONMEM. This is contrasted with the naming that you continue to get when you simply capture <code>ETA(1)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1"></a>$CAPTURE </span>
<span id="cb3-2"><a href="#cb3-2"></a>CL Y ETA<span class="op">(</span><span class="dv">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this case, the name would be <code>ETA_1</code>, with <code>()</code> getting removed and replaced with <code>_</code>. This sanitization of names happens any time a captured item has parens or brackets in the name.</p>
</section>
<section id="new-model-macro-sigma" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> New model macro: <code>SIGMA()</code></h1>
<p>The user can now access on-diagonal elements of <code>$SIGMA</code> through the <code>SIGMA()</code> macro. For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1"></a>$SIGMA <span class="fl">0.1</span> <span class="dv">12</span></span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>$TABLE</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="dt">double</span> STD<span class="op">=</span>sqrt<span class="op">(</span>SIGMA<span class="op">(</span><span class="dv">1</span><span class="op">)+</span>pow<span class="op">(</span>F<span class="op">,</span><span class="dv">2</span><span class="op">)*</span>SIGMA<span class="op">(</span><span class="dv">2</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This macro provides read-only access to the <code>$SIGMA</code> elements.</p>
</section>
<section id="matching-mrgsolve-and-nonmem-run-numbers" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Matching mrgsolve and NONMEM run numbers</h1>
<p>When a mrgsolve model is translated from a NONMEM run, it is common to give them matching file names. For example, if <code>101.ctl</code> is the NONMEM control stream name, we might create a mrgsolve version of that run as <code>101.cpp</code> or <code>101.mod</code>.</p>
<p>In this case, we will likely use <code>$NMEXT</code> or <code>$NMXML</code> blocks to import the estimates from the completed NONMEM run with code like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1"></a>$NMEXT</span>
<span id="cb5-2"><a href="#cb5-2"></a>run <span class="op">=</span> <span class="dv">101</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>project <span class="op">=</span> <span class="st">"model/nonmem"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>if the run completed in the <code>model/nonmem</code> directory.</p>
<p>Starting with mrgsolve version 1.0.7, users can assume this connection in run numbers by setting the <code>run</code> to <code>@cppstem</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource c number-lines code-with-copy"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1"></a>$NMEXT</span>
<span id="cb6-2"><a href="#cb6-2"></a>run <span class="op">=</span> <span class="st">"@cppstem"</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>project <span class="op">=</span> <span class="st">"model/nonmem"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This tells <code>$NMEXT</code> (and <code>$NMXML</code>) to look for <code>101.ext</code> (or <code>101.xml</code>) in the <code>model/nonmem/101</code> directory. Using this syntax will relieve the user from having to update the run number in these blocks when forking one model file to match a new NONMEM run.</p>
</section>
<section id="scrape-etas-from-the-input-data-set" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Scrape ETAs from the input data set</h1>
<p><code>mrgsim()</code> gains a new argument called <code>etasrc</code> which allows you to look to the data set for <code>ETA</code>s rather than simulating them from <code>$OMEGA</code>. This feature has several applications, including validation of your model translation from NONMEM and simulating from empirical Bayes estimates. These topics will be covered more in depth in separate blog posts.</p>
<p>For now, letâ€™s look at an example. This model has three <code>ETAs</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">mcode</span>(<span class="st">"etas"</span>, </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="st">'</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="st">  $OMEGA 1 2 3</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  $CAPTURE @etas 1:last</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">  '</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Building etas ... done.</code></pre>
</div>
</div>
<p>By default, the <code>ETA</code>s are random draws from <code>$OMEGA</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">mrgsim</span>(mod) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID time      ETA1       ETA2       ETA3
1  1    0 -1.797057 -0.4876599 -0.6140596
2  1    1 -1.797057 -0.4876599 -0.6140596
3  1    2 -1.797057 -0.4876599 -0.6140596
4  1    3 -1.797057 -0.4876599 -0.6140596
5  1    4 -1.797057 -0.4876599 -0.6140596
6  1    5 -1.797057 -0.4876599 -0.6140596</code></pre>
</div>
</div>
<p>When you have <code>ETA</code>s coded into your data set</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>data <span class="ot">&lt;-</span> <span class="fu">expand.ev</span>(<span class="at">cmt =</span> <span class="dv">0</span>, <span class="at">ETA1 =</span> <span class="fl">0.1</span>, <span class="at">ETA2 =</span> <span class="fl">0.2</span>, <span class="at">ETA3 =</span> <span class="fl">0.3</span>)</span>
<span id="cb11-2"><a href="#cb11-2"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID time amt cmt evid ETA1 ETA2 ETA3
1  1    0   0   0    1  0.1  0.2  0.3</code></pre>
</div>
</div>
<p>you can ask mrgsolve to use the data set <code>ETA</code>s rather than simulating new ones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">mrgsim</span>(mod, data, <span class="at">etasrc =</span> <span class="st">"data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model:  etas 
Dim:    26 x 5 
Time:   0 to 24 
ID:     1 
    ID time ETA1 ETA2 ETA3
1:   1    0  0.1  0.2  0.3
2:   1    0  0.1  0.2  0.3
3:   1    1  0.1  0.2  0.3
4:   1    2  0.1  0.2  0.3
5:   1    3  0.1  0.2  0.3
6:   1    4  0.1  0.2  0.3
7:   1    5  0.1  0.2  0.3
8:   1    6  0.1  0.2  0.3</code></pre>
</div>
</div>
<p>If the data set is missing one of the <code>ETA</code>s, it will be filled with <code>0</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>miss2 <span class="ot">&lt;-</span> <span class="fu">select</span>(data, <span class="sc">-</span>ETA2)</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">mrgsim</span>(mod, miss2, <span class="at">etasrc =</span> <span class="st">"data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Model:  etas 
Dim:    26 x 5 
Time:   0 to 24 
ID:     1 
    ID time ETA1 ETA2 ETA3
1:   1    0  0.1    0  0.3
2:   1    0  0.1    0  0.3
3:   1    1  0.1    0  0.3
4:   1    2  0.1    0  0.3
5:   1    3  0.1    0  0.3
6:   1    4  0.1    0  0.3
7:   1    5  0.1    0  0.3
8:   1    6  0.1    0  0.3</code></pre>
</div>
</div>
<p>You can ask for an error to be generated if not <em>all</em> <code>ETA</code>s are found on the data set by using <code>etasrc = "data.all"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">try</span>(<span class="fu">mrgsim</span>(mod, miss2, <span class="at">etasrc =</span> <span class="st">"data.all"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error : all 3 ETAs must be provided when `etasrc` is "data.all".</code></pre>
</div>
</div>
<p>Also, there will be an error if you ask for <code>ETA</code>s from the data set, but there are <em>none</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>missall <span class="ot">&lt;-</span> <span class="fu">select</span>(data, <span class="sc">-</span><span class="fu">contains</span>(<span class="st">"ETA"</span>))</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a><span class="fu">try</span>(<span class="fu">mrgsim</span>(mod, missall, <span class="at">etasrc =</span> <span class="st">"data"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error : at least one ETA must be provided when `etasrc` is "data".</code></pre>
</div>
</div>
<p>You can get more information about the <code>etasrc</code> argument in the â€˜Detailsâ€™ section of the <code>mrgsim()</code> help page</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>?mrgsim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>